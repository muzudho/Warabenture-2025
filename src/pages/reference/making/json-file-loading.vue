<template>

    <!-- æ©Ÿèƒ½ -->
    <compatible-device ref="compatibleDevice1Ref"/>

    <!-- ä»¥é™ã€ãƒšãƒ¼ã‚¸ -->
    <the-app-header/>
    <button-to-back-to-contents
        class="sec-0 mt-6"
        pagePath="../"
    />

    <h1>JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­è¾¼ã‚‚ã†ãœï¼</h1>
    <section class="sec-1 pt-6">

        <talk-balloon
            :src="oton2Src"
            :alt="oton2Alt"
            :name="oton2Name"
            :device="compatibleDevice1Ref?.device">
                JSONãƒ•ã‚¡ã‚¤ãƒ«ï¼‘ã¤èª­ã¿è¾¼ã‚€ã«ã‚‚ã‚„ã‚Šæ–¹ãŒã„ãã¤ã‹ã‚ã‚‹ã‚“ã§ã€ãã®é•ã„ã‚’ãƒ¡ãƒ¢ã—ã¦ãŠã“ã†ãœã€‚
        </talk-balloon>

        <talk-balloon
            :src="kifuwarabe2Src"
            :alt="kifuwarabe2Alt"
            :name="kifuwarabe2Name"
            :device="compatibleDevice1Ref?.device">
                ğŸ‘‡ ã˜ã‚ƒã‚ã€ä»¥ä¸‹ã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã„ã¦ãŠããœã€‚
        </talk-balloon>

        <p>ğŸ“„ <a target="_blank" :href="jsonFilePath">public{{jsonFilePath}}</a>:</p>
        <pre class="coding-example mb-6">
{
    "#this-file": "JSONã®ã‚µãƒ³ãƒ—ãƒ«ã ãœï¼ˆï¼¾â–½ï¼¾ï¼‰"
}
        </pre>

        <talk-balloon
            :src="oton2Src"
            :alt="oton2Alt"
            :name="oton2Name"
            :device="compatibleDevice1Ref?.device">
                ğŸ‘† ãã® JSON ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ã‚³ãƒ¼ãƒ‰ã®ï¼‘ã¤ã«ã€<br/>
                ğŸ‘‡ æ¬¡ã®ã‚ˆã†ãªæ›¸ãæ–¹ãŒã‚ã‚‹ãã†ã ãœã€‚
        </talk-balloon>

        <pre class="coding-example mb-6">
&lt;template&gt;
    &lt;pre&gt;&#123;&#123; jsonStr &#125;&#125;&lt;/pre&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
    import { onMounted, ref } from 'vue';

    const jsonStr = ref("èª­ã¿è¾¼ã¿ä¸­...");

    onMounted(async () =&gt; {
        try {
            const response = await <span class="red-marker">fetch</span>("/data/making/sample.json");   // publicãƒ•ã‚©ãƒ«ãƒ€ä¸‹ã®ãƒ‘ã‚¹
            if (!response.ok) throw new Error("Failed to fetch JSON");
            const data: any = await response.json();

            jsonStr.value = JSON.stringify(data, null, 4);

        } catch (error) {
            alert(`ERROR: sample.jsonãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼æ™‚ã€‚ ${error}`);
        }
    });
&lt;/script&gt;
        </pre>

        <talk-balloon
            :src="oton2Src"
            :alt="oton2Alt"
            :name="oton2Name"
            :device="compatibleDevice1Ref?.device">
                ğŸ‘† ã“ã‚Œã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€<br/>
                ğŸ‘‡ ä»¥ä¸‹ã®é€šã‚Šã€‚
        </talk-balloon>

        <pre class="coding-example mb-6">
{{ jsonStr }}
        </pre>

    </section>

    <br/>
    <h2>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰</h2>
    <section class="sec-2">
        <source-link/>
    </section>

    <button-to-go-to-top class="sec-0 pt-6"/>
</template>

<script setup lang="ts">

    // ##############
    // # ã‚¤ãƒ³ãƒãƒ¼ãƒˆ #
    // ##############

    import { onMounted, ref } from 'vue';

    // ++++++++++++++++++++++++++++++++++
    // + ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€€ï¼ã€€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ +
    // ++++++++++++++++++++++++++++++++++
    //
    // Tauri ãªã‚‰æ˜ç¤ºçš„ã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ Nuxt ãªã‚‰è‡ªå‹•ã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ãã‚Œã‚‹å ´åˆãŒã‚ã‚‹ã€‚
    //

    import CompatibleDevice from '@/components/CompatibleDevice.vue'
    import SourceLink from '@/components/SourceLink.vue';
    import TalkBalloon from '@/components/TalkBalloon.vue';

    // ++++++++++++++++++++++++++
    // + ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€€ï¼ã€€ãƒšãƒ¼ã‚¸ +
    // ++++++++++++++++++++++++++

    import ButtonToBackToContents from '@/components/ButtonToBackToContents.vue';
    import ButtonToGoToTop from '@/components/ButtonToGoToTop.vue';
    import TheAppHeader from '../../the-app-header.vue';


    // ##########
    // # ã‚³ãƒ¢ãƒ³ #
    // ##########
    //
    // ã‚ˆãä½¿ã†è¨­å®šã‚’ã¾ã¨ã‚ãŸã‚‚ã®ã€‚ç‰¹ã«ä¸å¤‰ã®ã‚‚ã®ã€‚
    //

    import oton2Src from "@/assets/img/talk/202506__character__01-1951-kifuwarabeNoOton-o1o2o0.png";
    const oton2Alt = "ããµã‚ã‚‰ã¹ã®ãŠçˆ¶ã‚“ï¼’";
    const oton2Name = "ããµã‚ã‚‰ã¹ã®ãŠçˆ¶ã‚“";
    import kifuwarabe2Src from "@/assets/img/talk/202506__character__01-2013-kifuwarabe-o1o1o0.png";
    const kifuwarabe2Alt = "ããµã‚ã‚‰ã¹ï¼’";
    const kifuwarabe2Name = "ããµã‚ã‚‰ã¹";
    import hiyoko2Src from "@/assets/img/talk/202506__character__01-2025-hiyoko-o1o1o0.png";
    const hiyoko2Alt = "ã²ã‚ˆã“ï¼’";
    const hiyoko2Name = "ã²ã‚ˆã“";
    import kurokichi1Src from "@/assets/img/talk/202509__character__10--kurokichi.png";
    const kurokichi1Alt = "ã‚°ãƒ­ãƒƒã‚¯ã®é»’å‰ï¼‘";
    const kurokichi1Name = "ã‚°ãƒ­ãƒƒã‚¯ã®é»’å‰";

    // ++++++++++++++++++++++++++++
    // + ã‚³ãƒ¢ãƒ³ã€€ï¼ã€€å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ« +
    // ++++++++++++++++++++++++++++

    const jsonFilePath = "/data/making/sample.json";    // public/data/making/sample.json


    // ################
    // # ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ #
    // ################

    const jsonStr = ref("èª­ã¿è¾¼ã¿ä¸­...");

    // ++++++++++++++++++++++++++++++++++
    // + ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€€ï¼ã€€è£…ç½®ã®äº’æ›æ€§ +
    // ++++++++++++++++++++++++++++++++++

    const compatibleDevice1Ref = ref<InstanceType<typeof CompatibleDevice> | null>(null);


    // ##############
    // # èµ·å‹•æ™‚å‡¦ç† #
    // ##############

    onMounted(async () => {
        try {
            const response = await fetch(jsonFilePath);   // publicãƒ•ã‚©ãƒ«ãƒ€ã«ç½®ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã€‚
            if (!response.ok) throw new Error("Failed to fetch JSON");
            const data: any = await response.json();

            jsonStr.value = JSON.stringify(data, null, 4);

        } catch (error) {
            alert(`ERROR: sample.jsonãƒ•ã‚¡ã‚¤ãƒ«èª­è¾¼æ™‚ã€‚ ${error}`);
        }
    });

</script>

<style scoped>
    @import '@/styles/notebook.css';
</style>
